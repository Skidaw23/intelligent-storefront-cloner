{% comment %}
  Sneaker Showcase Section ‚Äì Tag Based (reliable)
  Shows products tagged with 'sneaker'
{% endcomment %}

<section class="sneaker-showcase">
  <div class="page-width">
    <h2 class="title">üëü Shop Sneakers</h2>
    <div class="grid grid--2-col tablet:grid--3-col grid--4-col-desktop">
      {% assign sneaker_products = collections.all.products %}
      {% assign found = false %}
      {% for product in sneaker_products %}
        {% if product.tags contains 'sneaker' %}
          {% assign found = true %}
          {% assign variant = product.variants.first %}
          {% if variant.available %}
            <div class="grid__item product-card">
              <a href="{{ product.url }}" class="product-card__image-link">
                <img 
                  src="{{ product.featured_image | img_url: '500x500' }}" 
                  alt="{{ product.title }}" 
                  class="product-card__image"
                  loading="lazy"
                />
              </a>
              <div class="product-card__info">
                <h3 class="product-card__title">
                  <a href="{{ product.url }}">{{ product.title }}</a>
                </h3>
                <p class="product-card__price">
                  {% if variant.compare_at_price > variant.price %}
                    <span class="compare-at">{{ variant.compare_at_price | money }}</span>
                  {% endif %}
                  <span class="price">{{ variant.price | money }}</span>
                </p>

                {% if variant.inventory_quantity < 5 %}
                  <p class="low-stock">‚ö†Ô∏è Low stock!</p>
                {% endif %}

                <form method="post" action="/cart/add">
                  <input type="hidden" name="id" value="{{ variant.id }}">
                  <button type="submit" class="button button--primary">Add to Cart</button>
                </form>
              </div>
            </div>
          {% endif %}
        {% endif %}
      {% endfor %}

      {% unless found %}
        <p>No sneakers found. Make sure products are tagged with <strong>sneaker</strong>.</p>
      {% endunless %}
    </div>
  </div>
</section>

<style>
  .sneaker-showcase .product-card {
    border: 1px solid #e5e5e5;
    padding: 1rem;
    border-radius: 12px;
    transition: box-shadow 0.2s ease;
    text-align: center;
  }
  .sneaker-showcase .product-card:hover {
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
  }
  .product-card__image {
    width: 100%;
    height: auto;
    object-fit: cover;
    margin-bottom: 1rem;
    border-radius: 10px;
  }
  .product-card__price .compare-at {
    text-decoration: line-through;
    color: #999;
    margin-right: 0.5rem;
  }
  .low-stock {
    color: #e02b2b;
    font-weight: bold;
    margin: 0.5rem 0;
  }
</style>
