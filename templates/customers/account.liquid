---
layout: theme
---

<div class="template-customers-account section-template--16px-space-bottom">
  <div class="page-width">
    <div class="customer-account">
      <div class="customer-account__header">
        <h1 class="main-page-title">
          {{ 'customer.account.title' | t }}
        </h1>
        <p class="customer-account__welcome">
          {{ 'customer.account.welcome' | t: first_name: customer.first_name }}
        </p>
      </div>

      <div class="customer-account__content">
        <div class="customer-account__details">
          <div class="customer-account__info-card">
            <h2 class="customer-account__section-title">
              {{ 'customer.account.details' | t }}
            </h2>
            <div class="customer-account__info">
              <p><strong>{{ 'customer.account.name' | t }}:</strong> {{ customer.first_name }} {{ customer.last_name }}</p>
              <p><strong>{{ 'customer.account.email' | t }}:</strong> {{ customer.email }}</p>
              {%- if customer.phone -%}
                <p><strong>{{ 'customer.account.phone' | t }}:</strong> {{ customer.phone }}</p>
              {%- endif -%}
              <p><strong>{{ 'customer.account.member_since' | t }}:</strong> {{ customer.created_at | date: format: 'month_day_year' }}</p>
            </div>
            <a href="{{ routes.account_addresses_url }}" class="button royal-button royal-button--secondary">
              {{ 'customer.account.view_addresses' | t }}
            </a>
          </div>
        </div>

        <div class="customer-account__orders">
          <div class="customer-account__orders-header">
            <h2 class="customer-account__section-title">
              {{ 'customer.account.order_history' | t }}
            </h2>
            {%- if customer.orders.size > 0 -%}
              <p class="customer-account__order-count">
                {{ 'customer.account.total_orders' | t: count: customer.orders.size }}
              </p>
            {%- endif -%}
          </div>

          {%- if customer.orders.size > 0 -%}
            <div class="customer-account__orders-list">
              {%- paginate customer.orders by 20 -%}
                {%- for order in customer.orders -%}
                  <div class="customer-account__order">
                    <div class="customer-account__order-header">
                      <h3 class="customer-account__order-number">
                        <a href="{{ order.customer_url }}" class="customer-account__order-link">
                          {{ 'customer.order.title' | t: name: order.name }}
                        </a>
                      </h3>
                      <div class="customer-account__order-status">
                        <span class="customer-account__order-status-badge customer-account__order-status-badge--{{ order.fulfillment_status | default: 'unfulfilled' }}">
                          {%- if order.fulfillment_status == 'fulfilled' -%}
                            {{ 'customer.order.fulfilled_at' | t: date: order.fulfilled_at | date: format: 'date' }}
                          {%- elsif order.fulfillment_status == 'partial' -%}
                            {{ 'customer.order.partially_fulfilled_at' | t: date: order.fulfilled_at | date: format: 'date' }}
                          {%- else -%}
                            {{ 'customer.order.unfulfilled' | t }}
                          {%- endif -%}
                        </span>
                      </div>
                    </div>

                    <div class="customer-account__order-details">
                      <div class="customer-account__order-info">
                        <p><strong>{{ 'customer.order.date' | t }}:</strong> {{ order.created_at | date: format: 'date' }}</p>
                        <p><strong>{{ 'customer.order.payment_status' | t }}:</strong> 
                          <span class="customer-account__payment-status customer-account__payment-status--{{ order.financial_status }}">
                            {{ order.financial_status_label }}
                          </span>
                        </p>
                        <p><strong>{{ 'customer.order.total' | t }}:</strong> {{ order.total_price | money }}</p>
                      </div>

                      <div class="customer-account__order-items">
                        {%- for line_item in order.line_items limit: 3 -%}
                          <div class="customer-account__order-item">
                            {%- if line_item.product.featured_image -%}
                              <img
                                class="customer-account__order-item-image"
                                src="{{ line_item.product.featured_image | image_url: width: 60 }}"
                                alt="{{ line_item.product.featured_image.alt | escape }}"
                                width="60"
                                height="{{ 60 | divided_by: line_item.product.featured_image.aspect_ratio | ceil }}"
                                loading="lazy"
                              >
                            {%- endif -%}
                            <div class="customer-account__order-item-details">
                              <p class="customer-account__order-item-title">{{ line_item.product.title }}</p>
                              <p class="customer-account__order-item-variant">{{ line_item.variant.title }}</p>
                              <p class="customer-account__order-item-quantity">{{ 'customer.order.quantity' | t }}: {{ line_item.quantity }}</p>
                            </div>
                          </div>
                        {%- endfor -%}
                        
                        {%- if order.line_items.size > 3 -%}
                          <p class="customer-account__order-more">
                            {{ 'customer.order.and_more' | t: count: order.line_items.size | minus: 3 }}
                          </p>
                        {%- endif -%}
                      </div>
                    </div>

                    <div class="customer-account__order-actions">
                      <a href="{{ order.customer_url }}" class="button royal-button royal-button--small">
                        {{ 'customer.order.view' | t }}
                      </a>
                      {%- if order.financial_status == 'paid' and order.fulfillment_status == 'fulfilled' -%}
                        <button type="button" class="button royal-button royal-button--secondary royal-button--small" onclick="reorderItems('{{ order.id }}')">
                          {{ 'customer.order.reorder' | t }}
                        </button>
                      {%- endif -%}
                    </div>
                  </div>
                {%- endfor -%}

                {%- if paginate.pages > 1 -%}
                  <nav class="pagination" role="navigation" aria-label="{{ 'general.pagination.label' | t }}">
                    {%- if paginate.previous -%}
                      <a href="{{ paginate.previous.url }}" class="pagination__item pagination__item--prev" aria-label="{{ 'general.pagination.previous' | t }}">
                        {{ 'general.pagination.previous' | t }}
                      </a>
                    {%- endif -%}

                    {%- for part in paginate.parts -%}
                      {%- if part.is_link -%}
                        <a href="{{ part.url }}" class="pagination__item" aria-label="{{ 'general.pagination.page' | t: number: part.title }}">
                          {{ part.title }}
                        </a>
                      {%- else -%}
                        <span class="pagination__item pagination__item--current" aria-current="page">{{ part.title }}</span>
                      {%- endif -%}
                    {%- endfor -%}

                    {%- if paginate.next -%}
                      <a href="{{ paginate.next.url }}" class="pagination__item pagination__item--next" aria-label="{{ 'general.pagination.next' | t }}">
                        {{ 'general.pagination.next' | t }}
                      </a>
                    {%- endif -%}
                  </nav>
                {%- endif -%}
              {%- endpaginate -%}
            </div>
          {%- else -%}
            <div class="customer-account__no-orders">
              <p class="customer-account__empty-message">{{ 'customer.account.no_orders' | t }}</p>
              <a href="{{ routes.root_url }}" class="button royal-button">
                {{ 'general.continue_shopping' | t }}
              </a>
            </div>
          {%- endif -%}
        </div>
      </div>

      <div class="customer-account__actions">
        <a href="{{ routes.account_logout_url }}" class="button royal-button royal-button--secondary">
          {{ 'customer.account.log_out' | t }}
        </a>
      </div>
    </div>
  </div>
</div>

<script>
function reorderItems(orderId) {
  // This would integrate with Shopify's reorder functionality
  console.log('Reordering items from order:', orderId);
  // Implementation would depend on specific reorder requirements
}
</script>